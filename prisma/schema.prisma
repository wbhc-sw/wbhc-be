generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Company {
  companyID    Int      @id @default(autoincrement())
  name         String
  description  String?
  phoneNumber  String?
  url          String?
  createdAt    DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relationships
  investors    Investor[]
  investorAdmins InvestorAdmin[]

  @@index([name])
  @@index([createdAt])
}

model Investor {
  id                  String   @id @default(uuid())
  fullName            String
  phoneNumber         String?
  sharesQuantity      Int?
  calculatedTotal     Float?
  city                String
  submissionStatus    String   @default("received")
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  emailSentToAdmin    Boolean  @default(false)
  emailSentToInvestor Boolean  @default(false)
  companyID           Int?
  
  // Relationship
  company             Company? @relation(fields: [companyID], references: [companyID])

  @@index([sharesQuantity])
  @@index([createdAt])
  @@index([companyID])
}

model InvestorAdmin {
  id                  String   @id @default(uuid())
  fullName            String
  phoneNumber         String?
  sharesQuantity      Int?
  calculatedTotal     Float?
  investmentAmount    Float?
  city                String
  submissionStatus    String   @default("received")
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  emailSentToAdmin    Boolean  @default(false)
  emailSentToInvestor Boolean  @default(false)
  notes               String?
  callingTimes        Int      @default(0)
  leadStatus          String   @default("new")
  originalInvestorId  String?
  companyID           Int?
  
  // Relationships
  company             Company? @relation(fields: [companyID], references: [companyID])

  @@index([sharesQuantity])
  @@index([createdAt])
  @@index([leadStatus])
  @@index([companyID])
}
